
CREATE TABLE dbo.CLIENTE
( 
	IDCLIENTE            integer  NOT NULL ,
	NOMCLIENTE           varchar(150)  NOT NULL ,
	CONSTRAINT XPKCLIENTE PRIMARY KEY (IDCLIENTE ASC)
)
go



CREATE TABLE dbo.PEDIDO
( 
	IDPEDIDO             integer  NOT NULL ,
	FECHA                datetime  NOT NULL ,
	IDCLIENTE            integer  NOT NULL ,
	SUBTOTAL             numeric(10,2)  NOT NULL ,
	IMPUESTO             numeric(10,2)  NOT NULL ,
	TOTAL                numeric(10,2)  NOT NULL ,
	CONSTRAINT XPKPEDIDO PRIMARY KEY (IDPEDIDO ASC),
	CONSTRAINT FK_PEDIDO_CLIENTE FOREIGN KEY (IDCLIENTE) REFERENCES dbo.CLIENTE(IDCLIENTE)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE dbo.PRODUCTO
( 
	IDPRODUCTO           integer  NOT NULL ,
	NOMPRODUCTO          varchar(20)  NULL ,
	PRECIOVENTA          numeric(10,2)  NOT NULL 
	CONSTRAINT CHK_PRODUCTO_PRECIOVENTA_MAYOR_QUE_CERO
		CHECK  ( PRECIOVENTA > 0 ),
	CONSTRAINT XPKPRODUCTO PRIMARY KEY (IDPRODUCTO ASC)
)
go



CREATE TABLE dbo.DETALLE_PEDIDO
( 
	IDPEDIDO             integer  NOT NULL ,
	IDPRODUCTO           integer  NOT NULL ,
	CANTIDAD             integer  NOT NULL 
	CONSTRAINT CHK_DETALLE_PEDIDO_CANTIDAD_MAYOR_QUE_CERO
		CHECK  ( CANTIDAD > 0 ),
	PRECIONETO           numeric(10,2)  NOT NULL ,
	IMPORTE              numeric(10,2)  NOT NULL ,
	CONSTRAINT XPKDETALLE_PEDIDO PRIMARY KEY (IDPEDIDO ASC,IDPRODUCTO ASC),
	CONSTRAINT FK_DETALLE_PEDIDO_PEDIDO FOREIGN KEY (IDPEDIDO) REFERENCES dbo.PEDIDO(IDPEDIDO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
	CONSTRAINT FK_DETALLE_PEDIDO_PRODUCT0 FOREIGN KEY (IDPRODUCTO) REFERENCES dbo.PRODUCTO(IDPRODUCTO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go


